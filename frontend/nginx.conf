# 이 파일의 전체 내용을 복사하여 프로젝트의 nginx.conf 파일에 붙여넣으세요.

server {
    # 기본 포트인 80번 포트에서 수신합니다.
    listen 80;

    # React 앱 빌드 파일이 위치한 경로입니다.
    root /usr/share/nginx/html;

    # 기본적으로 index.html을 찾습니다.
    index index.html;

    # 모든 요청을 처리하는 기본 location 블록입니다.
    location / {
        # 이 부분이 가장 중요합니다.
        # 1. Nginx는 먼저 요청된 URI와 일치하는 파일($uri)이 있는지 찾습니다. (예: /static/js/main.js)
        # 2. 파일이 없으면, 일치하는 디렉토리($uri/)가 있는지 찾습니다.
        # 3. 위 두 경우 모두 해당하지 않으면(예: /authcallback, /mypage 등 React 라우터 경로),
        #    요청을 /index.html로 전달합니다.
        # 이렇게 하면 React 앱이 로드되고, React-Router가 경로를 처리하게 됩니다.
        try_files $uri $uri/ /index.html;
    }
}
